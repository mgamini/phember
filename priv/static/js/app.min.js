window.App=Ember.Application.create({LOG_TRANSITIONS:!0,PLATFORMS:["android","editor","ios","osx","linux","windows"],PHOENIX_ENDPOINT:location.protocol.match(/^https/)?"wss://"+location.host+"/ws":"ws://"+location.host+"/ws"});var map=Ember.ArrayPolyfills.map;App.ApplicationStore=DS.Store.extend(),App.PhoenixController=Ember.Controller.extend({socket:null,topics:Ember.Map.create(),init:function(){var e=new Phoenix.Socket(App.PHOENIX_ENDPOINT);this.set("socket",e),e.onClose=this.get("handleClose").bind(this)},addTopic:function(e,n,o,t){this.get("socket").join(e,n,o||{},t||function(){})},handleClose:function(){console.log("connection closed")}}),App.PhoenixSessionController=Ember.Controller.extend({needs:["phoenix"],init:function(){var e=this.get("controllers.phoenix");console.log(e)}});var Transaction=Ember.Object.extend({});App.ListLinkComponent=Ember.Component.extend({tagName:"li",classNameBindings:["active"],active:function(){return this.get("childViews").anyBy("active")}.property("childViews.@each.active")}),App.LoginController=Ember.Controller.extend({needs:["service:session"],actions:{logIn:function(){this.get("service:session").send("join","tokentokentoken",123456789)}}}),App.NavigationController=Ember.ArrayController.extend({needs:["service:session","login"],model:Ember.A([Ember.Object.create({title:"Posts",location:"posts",active:null})]),title:"Phember",isLoggedIn:Ember.computed.alias("service:session.isAuthenticated"),actions:{logIn:function(){this.get("controllers.login").send("logIn")}}}),App.PostsIndexController=Ember.ArrayController.extend({}),App.PostController=Ember.Controller.extend({}),App.Router.map(function(){this.route("login"),this.route("logout"),this.resource("posts",function(){})}),App.IndexRoute=Ember.Route.extend({}),App.PhoenixSocket=Ember.Controller.extend({socket:null,topics:null,init:function(){this.set("topics",Ember.Map.create());var e=new Phoenix.Socket(App.PHOENIX_ENDPOINT);e.onClose=this.get("handleClose").bind(this),this.set("socket",e)},addTopic:function(e,n,o,t){this.get("socket").join(e,n,o||{},t||function(){})},handleClose:function(){console.log("connection closed")}}),App.Session=Ember.Controller.extend({needs:["phoenix"],isAuthenticated:!1,init:function(){},actions:{join:function(e,n){this.get("service:phoenix").addTopic("session","user",{token:e,id:n},this.get("onSessionJoin"))}},onSessionJoin:function(){console.log("session join",arguments)}}),Ember.onLoad("Ember.Application",function(e){e.initializer({name:"session",initialize:function(e,n){n.register("service:session",App.Session,{singleton:!0}),n.inject("controller","service:session","service:session")}}),e.initializer({name:"phoenix",initialize:function(e,n){n.register("service:phoenix",App.PhoenixSocket,{singleton:!0}),n.inject("service:session","service:phoenix","service:phoenix")}})}),App.Utils={camelizeObj:function(e){var n={};return Object.keys(e).forEach(function(o){n[Ember.String.camelize(o)]=e[o]}),n},typeChecker:function(e){return"object"==typeof e?e instanceof Array?"array":"object":typeof e},findIdx:function(e,n,o){var t=null;return e.some(function(e,i){e&&e[n]==o&&(t=i)}),t},authCookie:{toObj:function(e){try{return JSON.parse(atob(e))}catch(n){return!1}},fromObj:function(e){try{return bota(JSON.stringify(e))}catch(n){return!1}}}},App.NavigationView=Ember.View.extend({tagName:"nav",classNames:["top-bar","navbar"],templateName:"navigation"}),App.PostView=Ember.View.extend({});