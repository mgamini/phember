window.App=Ember.Application.create({LOG_TRANSITIONS:!0,PLATFORMS:["android","editor","ios","osx","linux","windows"],PHOENIX_ENDPOINT:location.protocol.match(/^https/)?"wss://"+location.host+"/ws":"ws://"+location.host+"/ws"});var map=Ember.ArrayPolyfills.map;App.ApplicationStore=DS.Store.extend(),App.PhoenixController=Ember.Controller.extend({socket:null,topics:Ember.Map.create(),init:function(){var e=new Phoenix.Socket(App.PHOENIX_ENDPOINT);this.set("socket",e),e.onClose=this.get("handleClose").bind(this)},addTopic:function(e,o,n,t){this.get("socket").join(e,o,n||{},t||function(){})},handleClose:function(){console.log("connection closed")}}),App.PhoenixSessionController=Ember.Controller.extend({needs:["phoenix"],init:function(){var e=this.get("controllers.phoenix");console.log(e)}});var Transaction=Ember.Object.extend({});App.ListLinkComponent=Ember.Component.extend({tagName:"li",classNameBindings:["active"],active:function(){return this.get("childViews").anyBy("active")}.property("childViews.@each.active")}),App.LoginController=Ember.Controller.extend({}),App.NavigationController=Ember.ArrayController.extend({model:Ember.A([Ember.Object.create({title:"Posts",location:"posts",active:null})]),title:"Phember"}),App.PostsIndexController=Ember.ArrayController.extend({}),App.PostController=Ember.Controller.extend({}),App.Router.map(function(){this.route("login"),this.route("logout"),this.resource("posts",function(){})}),App.IndexRoute=Ember.Route.extend({}),App.PhoenixSocket=Ember.Controller.extend({socket:null,topics:null,init:function(){this.set("topics",Ember.Map.create());var e=new Phoenix.Socket(App.PHOENIX_ENDPOINT);e.onClose=this.get("handleClose").bind(this),this.set("socket",e),console.log("init")},addTopic:function(e,o,n,t){this.get("socket").join(e,o,n||{},t||function(){})},handleClose:function(){console.log("connection closed")}}),App.Session=Ember.Controller.extend({needs:["phoenix"],isInitialized:!1,init:function(){console.log("session init"),this.get("service:phoenix").addTopic("session","user",{id:"me"},this.get("onSessionJoin"))},onSessionJoin:function(){console.log("session join",arguments)}}),Ember.onLoad("Ember.Application",function(e){e.initializer({name:"session",initialize:function(e,o){o.register("service:session",App.Session,{singleton:!0}),o.inject("controller","service:session","service:session")}}),e.initializer({name:"phoenix",initialize:function(e,o){o.register("service:phoenix",App.PhoenixSocket,{singleton:!0}),o.inject("service:session","service:phoenix","service:phoenix")}})}),App.Utils={camelizeObj:function(e){var o={};return Object.keys(e).forEach(function(n){o[Ember.String.camelize(n)]=e[n]}),o},typeChecker:function(e){return"object"==typeof e?e instanceof Array?"array":"object":typeof e},findIdx:function(e,o,n){var t=null;return e.some(function(e,i){e&&e[o]==n&&(t=i)}),t},authCookie:{toObj:function(e){try{return JSON.parse(atob(e))}catch(o){return!1}},fromObj:function(e){try{return bota(JSON.stringify(e))}catch(o){return!1}}}},App.NavigationView=Ember.View.extend({tagName:"nav",classNames:["top-bar","navbar"],templateName:"navigation"}),App.PostView=Ember.View.extend({});